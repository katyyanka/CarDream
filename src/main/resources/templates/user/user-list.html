<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>

    <script th:src="@{js/script_sorting.js}"></script>
    <link rel="stylesheet" href="styles/templatemo-style.css">
    <link rel="stylesheet" href="styles/bootstrap.min.css">
    <link rel="stylesheet" href="styles/font-awesome.min.css">
    <link rel="stylesheet" href="styles/owl.carousel.css">
    <link rel="stylesheet" href="styles/owl.theme.default.min.css">
    <link rel="stylesheet" href="styles/templatemo-style.css">
</head>
<body class="back">
<div>
    <section class="navbar custom-navbar navbar-fixed-top" role="navigation">
        <div class="container">

            <div class="navbar-header">
                <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                </button>

                <a href="../" class="navbar-brand">Туда-Сюда</a>
            </div>

            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-nav-first">
                    <li><a href="./" class="smoothScroll">Главная</a></li>
                    <li><a href="../" class="smoothScroll">О нас</a></li>
                    <li><a href="" class="smoothScroll">Поездки</a></li>

                    <!--Admins functions-->
                    <li sec:authorize="hasRole('ROLE_ADMIN')"><a href="/users" class="smoothScroll">Пользователи</a>
                    </li>
                    <li sec:authorize="hasRole('ROLE_ADMIN')"><a href="/fuels" class="smoothScroll">Топливо</a></li>
                    <li sec:authorize="hasRole('ROLE_ADMIN')"><a href="/vehicles" class="smoothScroll">Транспорт</a>
                    </li>
                    <!--Authorization and Logout-->
                    <li th:if="${#httpServletRequest.remoteUser}==null"><a href="/login" class="smoothScroll">Войти</a>
                    </li>
                    <li th:unless="${#httpServletRequest.remoteUser}==null"><a
                            href="javascript: document.logoutForm.submit()" role="menuitem"> Выйти</a>
                    </li>
                    <form name="logoutForm" th:action="@{/logout}" method="post" th:hidden="true">
                        <input hidden type="submit" value="Sign Out"/>
                    </form>

                </ul>

            </div>

        </div>
    </section>
</div>

<h4 th:inline="text">Welcome [[${#httpServletRequest.remoteUser}]]</h4>
<div th:switch="${users}">
    <h2 th:case="null">Пользователи не найдены!</h2>
    <div th:case="*">
        <h2>Users</h2>
        <table class="table table-striped table-hover table_sort" id="example">
            <thead>
            <tr>
                <th>Email</th>
                <th>Тип</th>
                <th>Фамилия</th>
                <th>Имя</th>
                <th>Дата рождения</th>
                <th>Телефон</th>
                <th>Автомобиль</th>

            </tr>
            </thead>
            <tbody>
            <tr th:each="user : ${users}">
                <td th:text="${user.username}"></td>
                <td th:switch="${user.role}">
                    <div th:case="'ROLE_ADMIN'">
                        Администратор
                    </div>
                    <div th:case="'ROLE_USER'">
                        Пользователь
                    </div>
                    <div th:case="'ROLE_DRIVER'">
                        Водитель
                    </div>
                </td>
                <td th:text="${user.lastname}"></td>
                <td th:text="${user.name}"></td>
                <td th:text="${user.birthday}"></td>
                <td th:text="${user.phone}"></td>

                <td sec:authorize="hasRole('ROLE_ADMIN')"><a
                        th:unless="${user.username} == ${#httpServletRequest.remoteUser}"
                        th:href="@{user-update/{username}(username=${user.username})}"> Редактировать</a></td>
                <td sec:authorize="hasRole('ROLE_ADMIN')"><a
                        th:unless="${user.username} == ${#httpServletRequest.remoteUser}"
                        th:href="@{user-delete/{username}(username=${user.username})}">Удалить</a></td>

            </tbody>
        </table>
    </div>
    <p><a href="/user-create">Добавить</a></p>
</div>


<!-- Scripts -->
<script th:src="@{/js/jquery.min.js}"></script>
<script th:src="@{/js/browser.min.js}"></script>
<script th:src="@{/js/breakpoints.min.js}"></script>
<script th:src="@{/js/main.js}"></script>
<!-- SCRIPTS -->
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/smoothscroll.js"></script>
<script src="js/custom.js"></script>

</body>
</html>